#mgmt_driver_override
This script will override the management interface driver on a BIG-IP.  This is useful for forcing mx6 network adapters to use the mlx5_core driver.

This is a workaround for a BIG-IP VE that has Mellanox ConnectX-6 or newer SR-IOV NICs being used for both data-plane and management networks.  The Mellanox ConnectX-6 NIC is fully supported for the data-plane but requires this workaround for the management plane.

The install script also installs hooks into /config/user_alert.conf to re-run the install script upon reboot & new software installation.  This means that the workaround doesn't need to be reinstalled after upgrades, however you may see an extra reboot after upgrades to redeploy the script.

##Installation
To install and/or update the script simply run the following commands:
```
echo -en "IyEvYmluL2Jhc2gKCm1nbXRfZHJpdmVyX292ZXJyaWRlX3NlcnZpY2VfZmlsZT0iVzFWdWFYUmREUXBFWlhOamNtbHdkR2x2YmowaVQzWmxjbkpwWkdWeklHMW5iWFFnWkhKcGRtVnlJR1p2Y2lCdGJIZzJJR05oY21SeklIUnZJSFZ6WlNCdGJIZzFYMk52Y21VZ1pISnBkbVZ5TGlJTkNrSmxabTl5WlQxdVpYUjNiM0pyTG5SaGNtZGxkQTBLVjJGdWRITTliRzlqWVd3dFpuTXVkR0Z5WjJWMERRb05DbHRUWlhKMmFXTmxYUTBLVkhsd1pUMXphVzF3YkdVTkNrVjRaV05UZEdGeWREMGlMM05vWVhKbFpDOXRaMjEwWDJSeWFYWmxjbDl2ZG1WeWNtbGtaUzV6YUNJTkNsTjBZVzVrWVhKa1QzVjBjSFYwUFdwdmRYSnVZV3dOQ2cwS1cwbHVjM1JoYkd4ZERRcFhZVzUwWldSQ2VUMXRkV3gwYVMxMWMyVnlMblJoY21kbGRBPT0iCm1nbXRfZHJpdmVyX292ZXJyaWRlX3NoX2ZpbGU9Ikl5RWdMMkpwYmk5aVlYTm9DaU1nVkdocGN5QnpZM0pwY0hRZ2QybHNiQ0J2ZG1WeWNtbGtaU0IwYUdVZ2JXRm5aVzFsYm5RZ2FXNTBaWEptWVdObElHUnlhWFpsY2lCaGRDQmliMjkwSUhScGJXVXNJSE5vYjNWc1pDQmlaU0JqWVd4c1pXUWdabkp2YlNCaElITjVjM1JsYldRZ2MyVnlkbWxqWlM0S2JHOW5aMlZ5SUMxd0lHeHZZMkZzTUM1dWIzUnBZMlVnSW0xbmJYUmZaSEpwZG1WeVgyOTJaWEp5YVdSbE9pQlNkVzV1YVc1bklFMVlOUzgySUUxbmJYUWdSSEpwZG1WeUlFOTJaWEp5YVdSbElGTmpjbWx3ZENJS1pXTm9ieUFpYldkdGRGOWtjbWwyWlhKZmIzWmxjbkpwWkdVNklITjBZWEowYVc1bklITmpjbWx3ZENCeWRXNGlDbVJ5YVhabGNqMGliV3g0TlY5amIzSmxJZ3B3WTJsZllXUmtjajBrS0d4emNHTnBJSHdnWjNKbGNDQXRiVEVnVFdWc2JHRnViM2dnZkNCaGQyc2dKM3NnY0hKcGJuUWdJakF3TURBNklpUXhJSDBuS1Fwd1kybGZjR0YwYUQwaUwzTjVjeTlpZFhNdmNHTnBMMlJsZG1salpYTXZKSHR3WTJsZllXUmtjbjBpQ2lNZ1FXUmtJR1J5YVhabGNpQnZkbVZ5Y21sa1pTQmxiblJ5ZVFwcFppQmJXeUF0WkNBa2NHTnBYM0JoZEdnZ1hWMDdJSFJvWlc0S0lDQmxZMmh2SUNKdFoyMTBYMlJ5YVhabGNsOXZkbVZ5Y21sa1pUb2dWM0pwZEdsdVp5QmtjbWwyWlhJZ2RHOGdKSHR3WTJsZmNHRjBhSDB2WkhKcGRtVnlYMjkyWlhKeWFXUmxJZ29nSUd4dloyZGxjaUF0Y0NCc2IyTmhiREF1Ym05MGFXTmxJQ0p0WjIxMFgyUnlhWFpsY2w5dmRtVnljbWxrWlRvZ1YzSnBkR2x1WnlBa2UyUnlhWFpsY24wZ2RHOGdKSHR3WTJsZmNHRjBhSDB2WkhKcGRtVnlYMjkyWlhKeWFXUmxJZ29nSUdWamFHOGdKSHRrY21sMlpYSjlJRDRnSkh0d1kybGZjR0YwYUgwdlpISnBkbVZ5WDI5MlpYSnlhV1JsQ21Wc2MyVUtJQ0JsWTJodklDSnRaMjEwWDJSeWFYWmxjbDl2ZG1WeWNtbGtaVG9nUlZKU1QxSTZJRkJEU1NCa1pYWnBZMlVnY0dGMGFDQW9KSEJqYVY5d1lYUm9LU0J1YjNRZ1ptOTFibVF1SUVWNGFYUnBibWN1TGk0aUNpQWdiRzluWjJWeUlDMXdJR3h2WTJGc01DNWxjbklnSW0xbmJYUmZaSEpwZG1WeVgyOTJaWEp5YVdSbE9pQkZVbEpQVWpvZ1VFTkpJR1JsZG1salpTQndZWFJvSUNna2NHTnBYM0JoZEdncElHNXZkQ0JtYjNWdVpDNGlDaUFnWlhocGRDQXhDbVpwQ2lNZ1ptOXlZMmxpYkhrZ2NISnZZbVVnZEdoaGRDQlFRMGtnYzJ4dmRBcGxZMmh2SUNKdFoyMTBYMlJ5YVhabGNsOXZkbVZ5Y21sa1pUb2dSbTl5WTJsdVp5QmtjbWwyWlhJZ2NISnZZbVVnYjJZZ0pIQmphVjloWkdSeUlncHNiMmRuWlhJZ0xYQWdiRzlqWVd3d0xtNXZkR2xqWlNBaWJXZHRkRjlrY21sMlpYSmZiM1psY25KcFpHVTZJRVp2Y21OcGJtY2daSEpwZG1WeUlIQnliMkpsSUc5bUlDUjdjR05wWDJGa1pISjlJZ3BsWTJodklDSWtjR05wWDJGa1pISWlJRDRnTDNONWN5OWlkWE12Y0dOcEwyUnlhWFpsY25OZmNISnZZbVU9IgoKc3lzdGVtY3RsIGlzLWVuYWJsZWQgbWdtdF9kcml2ZXJfb3ZlcnJpZGUKb3ZlcnJpZGVfc2VydmljZV9lbmFibGVkPSQ/CmlmIFsgJHtvdmVycmlkZV9zZXJ2aWNlX2VuYWJsZWR9IC1uZSAwIF07IHRoZW4KICAgIGVjaG8gImluc3RhbGxfbWdtdF9kcml2ZXJfb3ZlcnJpZGUuc2g6IERpZCBub3QgZmluZCBtZ210X2RyaXZlcl9vdmVycmlkZSBzZXJ2aWNlLCBpc250YWxsaW5nIG5vdy4iCiAgICBiYXNlNjQgLWQgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL21nbXRfZHJpdmVyX292ZXJyaWRlLnNlcnZpY2UgPDw8ICR7bWdtdF9kcml2ZXJfb3ZlcnJpZGVfc2VydmljZV9maWxlfQogICAgYmFzZTY0IC1kID4gL3NoYXJlZC9tZ210X2RyaXZlcl9vdmVycmlkZS5zaCA8PDwgJHttZ210X2RyaXZlcl9vdmVycmlkZV9zaF9maWxlfQogICAgY2htb2QgK3ggL3NoYXJlZC9tZ210X2RyaXZlcl9vdmVycmlkZS5zaAogICAgc3lzdGVtY3RsIGVuYWJsZSBtZ210X2RyaXZlcl9vdmVycmlkZQpmaQoKIyBDaGVjayBpZiB0aGUgZHJpdmVyIGlzIGN1cnJlbnRseSB1c2VkIG9yIGlmIHRoaXMgaXMgZmlyc3QgaW5zdGFsbCwgYW5kIHdlIG5lZWQgdG8gcmVib290Lgpsc3BjaSAtayAtZCAxNWIzOjEwMWUgfCBncmVwIC0tc2lsZW50IC1pICJkcml2ZXIgaW4gdXNlIgpkcml2ZXJfaW5fdXNlPSQ/CmlmIFsgJHtkcml2ZXJfaW5fdXNlfSAtbmUgMCBdOyB0aGVuCiAgICAjIElmIGRyaXZlciBpc24ndCBpbiB1c2UsIHdlIHNob3VsZCByZWJvb3Qgb25jZSwgYnV0IHVzZSBhIGZpbGUgdG8gbm90IGdldCBpbnRvIGEgcmVib290IGxvb3AuCiAgICAjIENoZWNrIGlmIHdlJ3ZlIGdvdCBtdWx0aXBsZSByZWJvb3RzIHRoZW4gd2UncmUgaW4gYW4gZXJyb3IgY29uZGl0aW9uIGFuZCBuZWVkIG5vdCByZWJvb3QuCiAgICBpZiBbICEgLWYgL3NoYXJlZC9tZ210X2RyaXZlcl9vdmVycmlkZV9yZWJvb3QgXTsgdGhlbgogICAgICAgICMgdG91Y2ggZmlsZSwgdG8gYmUgYWJsZSB0byBjaGVjayBmb3IgYSByZWJvb3QgbG9vcC4KICAgICAgICB0b3VjaCAvc2hhcmVkL21nbXRfZHJpdmVyX292ZXJyaWRlX3JlYm9vdAogICAgICAgIHJlYm9vdAogICAgZmkKZWxzZQogICAgIyBpZiBkcml2ZXIgaXMgaW4gdXNlLCBhbmQgcmVib290IGZpbGUgc3RpbGwgZXhpc3RzLCB0aGUgZHJpdmVyIG92ZXJyaWRlIHdvcmtlZCwgYW5kIHdlIHNob3VsZCBjbGVhbiB1cCB0aGUgcmVib290IGZpbGUuCiAgICBpZiBbIC1mIC9zaGFyZWQvbWdtdF9kcml2ZXJfb3ZlcnJpZGVfcmVib290IF07IHRoZW4KICAgICAgICBybSAvc2hhcmVkL21nbXRfZHJpdmVyX292ZXJyaWRlX3JlYm9vdAogICAgZmkKZmkKCiMgQ2hlY2sgZm9yIGluc3RhbGwgc2NyaXB0IGluIHVzZXJfYWxlcnQuY29uZiwgaWYgaXQncyBub3QgdGhlcmUgaXNudGFsbCBpdC4KIyBUaGlzIHdpbGwgcmUtaW5zdGFsbCB0aGUgZHJpdmVyIG92ZXJyaWRlIHdoZW4gYmlnLWlwIHVwZ3JhZGVzIG9jY3VyLgpncmVwIC0tc2lsZW50IGluc3RhbGxfbWdtdF9kcml2ZXJfb3ZlcnJpZGUuc2ggL2NvbmZpZy91c2VyX2FsZXJ0LmNvbmYKaWYgWyAkPyAtbmUgMCBdOyB0aGVuCiAgICBlY2hvIC1lbiAiXG5hbGVydCB0bW1fc3RhcnR1cCBcIkZ1bGwgY29uZmlndXJhdGlvbiBpbml0aWFsaXphdGlvbiBwaGFzZSB0cmlnZ2VyZWRcIiB7XG4gICAgZXhlYyBjb21tYW5kPVwiL2Jpbi9iYXNoIC9zaGFyZWQvaW5zdGFsbF9tZ210X2RyaXZlcl9vdmVycmlkZS5zaFwiXG59XG4iID4+IC9jb25maWcvdXNlcl9hbGVydC5jb25mCiAgICBlY2hvIC1lbiAiXG5hbGVydCB0bW1fc3RhcnR1cCBcIkluaXRpYWwgcHJvdmlzaW9uaW5nIHN1Y2Nlc3NmdWxcIiB7XG4gICAgZXhlYyBjb21tYW5kPVwiL2Jpbi9iYXNoIC9zaGFyZWQvaW5zdGFsbF9tZ210X2RyaXZlcl9vdmVycmlkZS5zaFwiXG59XG4iID4+IC9jb25maWcvdXNlcl9hbGVydC5jb25mCmZpCgoKIyBDaGVjayBpZiBmaWxlcyBhcmUgdGhlIGxhdGVzdCBmcm9tIHRoZSBpbnN0YWxsIHNjcmlwdDoKc2VydmljZV9tZDVzdW1fZnJvbV9pbnN0YWxsPSQoZWNobyAtZW4gJG1nbXRfZHJpdmVyX292ZXJyaWRlX3NlcnZpY2VfZmlsZSB8IGJhc2U2NCAtZCB8IG1kNXN1bSB8IGF3ayAne3ByaW50ICQxfScpCnNlcnZpY2VfbWQ1c3VtX2Zyb21fZmlsZT0kKG1kNXN1bSAvZXRjL3N5c3RlbWQvc3lzdGVtL21nbXRfZHJpdmVyX292ZXJyaWRlLnNlcnZpY2UgfCBhd2sgJ3twcmludCAkMX0nKQppZiBbICR7c2VydmljZV9tZDVzdW1fZnJvbV9pbnN0YWxsfSAhPSAke3NlcnZpY2VfbWQ1c3VtX2Zyb21fZmlsZX0gXTsgdGhlbgogICAgZWNobyAibWQ1c3VtIGZvciAvZXRjL3N5c3RlbWQvc3lzdGVtL21nbXRfZHJpdmVyX292ZXJyaWRlLnNlcnZpY2UgZG9lc24ndCBtYXRjaCBjdXJyZW50IGluc3RhbGwgc2NyaXB0LCByZXBsYWNpbmcgZnJvbSBpbnN0YWxsIHNjcmlwdC4iCiAgICBiYXNlNjQgLWQgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL21nbXRfZHJpdmVyX292ZXJyaWRlLnNlcnZpY2UgPDw8ICR7bWdtdF9kcml2ZXJfb3ZlcnJpZGVfc2VydmljZV9maWxlfQpmaQoKc2hfbWQ1c3VtX2Zyb21faW5zdGFsbD0kKGVjaG8gLWVuICRtZ210X2RyaXZlcl9vdmVycmlkZV9zaF9maWxlIHwgYmFzZTY0IC1kIHwgbWQ1c3VtIHwgYXdrICd7cHJpbnQgJDF9JykKc2hfbWQ1c3VtX2Zyb21fZmlsZT0kKG1kNXN1bSAvc2hhcmVkL21nbXRfZHJpdmVyX292ZXJyaWRlLnNoIHwgYXdrICd7cHJpbnQgJDF9JykKaWYgWyAke3NlcnZpY2VfbWQ1c3VtX2Zyb21faW5zdGFsbH0gIT0gJHtzZXJ2aWNlX21kNXN1bV9mcm9tX2ZpbGV9IF07IHRoZW4KICAgIGVjaG8gIm1kNXN1bSBmb3IgL3NoYXJlZC9tZ210X2RyaXZlcl9vdmVycmlkZS5zaCBkb2Vzbid0IG1hdGNoIGN1cnJlbnQgaW5zdGFsbCBzY3JpcHQsIHJlcGxhY2luZyBmcm9tIGluc3RhbGwgc2NyaXB0LiIKICAgIGJhc2U2NCAtZCA+IC9zaGFyZWQvbWdtdF9kcml2ZXJfb3ZlcnJpZGUuc2ggPDw8ICR7bWdtdF9kcml2ZXJfb3ZlcnJpZGVfc2hfZmlsZX0KZmkK" | base64 -d > /shared/install_mgmt_driver_override.sh
bash /shared/install_mgmt_driver_override.sh
reboot
```

If you happen to have internet access you can use:
```
curl -o /shared/install_mgmt_driver_override.sh 'https://raw.githubusercontent.com/mhermsdorferf5/mgmt_driver_override/main/install_mgmt_driver_override.sh'
bash /shared/install_mgmt_driver_override.sh
reboot
```
